<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini AI - Hosam Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #050510; --card: #111126; --accent: #8a70ff; --text: #ffffff; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        
        .phone-frame {
            width: 360px; height: 740px; background: var(--bg); border: 2px solid #222; border-radius: 40px;
            display: flex; flex-direction: column; position: relative; overflow: hidden; box-shadow: 0 0 40px rgba(0,0,0,0.8);
        }

        /* UI Elements */
        .header { padding: 40px 20px 10px; }
        .badge { background: var(--accent); font-size: 10px; padding: 4px 10px; border-radius: 20px; position: absolute; top: 20px; right: 20px; }
        
        #chat-window { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; font-size: 14px; }
        .msg { padding: 10px 15px; border-radius: 15px; max-width: 80%; }
        .user { align-self: flex-end; background: #2e2e5a; color: white; }
        .ai { align-self: flex-start; background: var(--card); border: 1px solid #333; color: var(--accent); }

        /* The Glowing Orb (Talk Mode Visual) */
        .orb-container { height: 120px; display: flex; justify-content: center; align-items: center; }
        .orb { width: 60px; height: 60px; background: radial-gradient(circle, var(--accent), transparent); border-radius: 50%; filter: blur(10px); transition: 0.3s; }
        .orb.listening { transform: scale(1.5); filter: blur(20px) brightness(1.5); animation: pulse 1s infinite; }

        /* Input Area */
        .controls { padding: 20px; background: var(--card); display: flex; gap: 10px; align-items: center; }
        input { flex: 1; background: #1c1c3a; border: 1px solid #333; border-radius: 20px; padding: 12px; color: white; outline: none; }
        .circle-btn { width: 45px; height: 45px; border-radius: 50%; border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: 0.2s; }
        .send-btn { background: var(--accent); color: white; }
        .talk-btn { background: #333; color: white; font-size: 20px; }
        
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
    </style>
</head>
<body>

<div class="phone-frame">
    <div class="badge">FREE TRIAL UNLOCKED</div>
    <div class="header">
        <h1>Hello, Hosam</h1>
        <p>Talk or type to start</p>
    </div>

    <div id="chat-window">
        <div class="msg ai">Welcome! I'm Gemini. Everything is free for now. Click the ðŸŽ¤ to talk or type below.</div>
    </div>

    <div class="orb-container"><div class="orb" id="visual-orb"></div></div>

    <div class="controls">
        <button class="circle-btn talk-btn" id="talkBtn">ðŸŽ¤</button>
        <input type="text" id="userInput" placeholder="Ask anything...">
        <button class="circle-btn send-btn" id="sendBtn">âž¤</button>
    </div>
</div>

<script type="module">
    import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

    // --- 1. SET YOUR API KEY HERE ---
    const API_KEY = "AIzaSyDi7NI_k50AeCmBJmr5sHjYCqp2NFveWBs";
    const genAI = new GoogleGenerativeAI(API_KEY);
    const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash" });

    const chatWindow = document.getElementById('chat-window');
    const userInput = document.getElementById('userInput');
    const orb = document.getElementById('visual-orb');

    // --- 2. THE SEND BUTTON LOGIC ---
    async function sendMessage(text) {
        if (!text) return;
        addMessage(text, 'user');
        userInput.value = '';

        try {
            const result = await model.generateContent(text);
            const response = await result.response;
            const aiText = response.text();
            addMessage(aiText, 'ai');
            return aiText;
        } catch (err) {
            addMessage("Error: API limit or bad key.", 'ai');
        }
    }

    function addMessage(text, sender) {
        const div = document.createElement('div');
        div.className = `msg ${sender}`;
        div.innerText = text;
        chatWindow.appendChild(div);
        chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    document.getElementById('sendBtn').onclick = () => sendMessage(userInput.value);
    userInput.addEventListener("keypress", (e) => { if(e.key === "Enter") sendMessage(userInput.value); });

    // --- 3. THE TALK MODE LOGIC ---
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (SpeechRecognition) {
        const recognition = new SpeechRecognition();
        
        document.getElementById('talkBtn').onclick = () => {
            recognition.start();
            orb.classList.add('listening');
        };

        recognition.onresult = async (event) => {
            orb.classList.remove('listening');
            const transcript = event.results[0][0].transcript;
            const response = await sendMessage(transcript);
            
            // AI talks back!
            const speech = new SpeechSynthesisUtterance(response);
            window.speechSynthesis.speak(speech);
        };

        recognition.onerror = () => orb.classList.remove('listening');
    } else {
        alert("Speech not supported in this browser.");
    }
</script>

</body>
</html>
